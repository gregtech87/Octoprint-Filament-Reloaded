<h3>{{ _('Filament Sensor Reloaded') }}</h3>

<div class="control-group">
    <label class="control-label">{{ _('GPIO Pin') }}</label>
    <div class="controls">
        <input type="number" class="input-block-level" data-bind="value: settings.plugins.filamentreload.pin">
        <span class="help-block">{{ _('GPIO Pin to monitor (BOARD numbering). Set to -1 to disable.') }}</span>
    </div>
</div>

<div class="control-group">
    <label class="control-label">{{ _('Bounce Time (ms)') }}</label>
    <div class="controls">
        <input type="number" class="input-block-level" data-bind="value: settings.plugins.filamentreload.bounce">
        <span class="help-block">{{ _('Debounce time in milliseconds to prevent false triggers.') }}</span>
    </div>
</div>

<div class="control-group">
    <label class="control-label">{{ _('Switch Type') }}</label>
    <div class="controls">
        <select class="input-block-level" data-bind="value: settings.plugins.filamentreload.switch">
            <option value="0">{{ _('Normally Open (NO)') }}</option>
            <option value="1">{{ _('Normally Closed (NC)') }}</option>
        </select>
        <span class="help-block">{{ _('Select your switch type. NO = Active High, NC = Active Low.') }}</span>
    </div>
</div>

<div class="control-group">
    <label class="control-label">{{ _('Pull Resistor Mode') }}</label>
    <div class="controls">
        <select class="input-block-level" data-bind="value: settings.plugins.filamentreload.mode">
            <option value="21">{{ _('Pull Up (GPIO.PUD_UP)') }}</option>
            <option value="22">{{ _('Pull Down (GPIO.PUD_DOWN)') }}</option>
        </select>
        <span class="help-block">{{ _('Internal pull resistor configuration. Most sensors use Pull Up.') }}</span>
    </div>
</div>

<div class="control-group">
    <label class="control-label">{{ _('Check Frequency (seconds)') }}</label>
    <div class="controls">
        <input type="number" class="input-block-level" data-bind="value: settings.plugins.filamentreload.check_freq" min="1" max="60">
        <span class="help-block">{{ _('How often to check the sensor status (1-60 seconds). Default: 5 seconds.') }}</span>
    </div>
</div>

<div class="control-group">
    <label class="checkbox">
        <input type="checkbox" data-bind="checked: settings.plugins.filamentreload.pause_print">
        {{ _('Pause print when out of filament') }}
    </label>
</div>

<div class="control-group">
    <label class="control-label">{{ _('GCODE to execute') }}</label>
    <div class="controls">
        <textarea rows="3" class="input-block-level" data-bind="value: settings.plugins.filamentreload.gcode"></textarea>
        <span class="help-block">{{ _('Optional GCODE commands to execute when filament runs out (one per line).') }}</span>
    </div>
</div>

<div class="alert alert-info">
    <strong>{{ _('Note:') }}</strong> {{ _('After changing settings, the plugin will automatically reconfigure the sensor. Make sure your GPIO pin is correctly wired before enabling.') }}
</div>